(function(n){n.fn.compliDocumentAlt==null&&(n.fn.compliDocumentAlt={});n.fn.compliDocumentAlt=function(){function nt(t,i,r,u,f){var e,l,s;if(t!=null&&t.length>0&&(e=t.find(i),l=t.find(r),e.length>0&&l.length>0)){var o=c(t),a=o==!0?h.CancelIcon:h.RefreshIcon,y=o==!0?h.RefreshIcon:h.CancelIcon,p=o==!0?"Cancel":"Reload",w=o==!0?null:h.DisabledButtonLink,b=o==!0?u:v,k=o==!0?h.DisabledButtonLink:null;e.off("click");e.on("click",b);e.removeClass(k);e.addClass(w);f==!0&&(s=n.parseHTML(l.html()),n(s[0]).removeClass(y).addClass(a),s[1]=p,l.html(s[0].outerHTML+s[1]))}}function ht(n,t,i){n&&(n.find("input[data-is-dirty=true]").each(function(){var n=this;t&&t(n);n.removeAttribute("data-is-dirty")}),i&&i(n))}function s(n,t,i){if(DisplayConfirmationModal)DisplayConfirmationModal(n,t,i);else{var r=confirm(n.message);r==!0&&t?t():r==!1&&i&&i()}}function l(i){n(t.containers.CreatedMessage).fadeIn(500).delay(1e3).fadeOut(400).html(i)}function r(n){onDisplayError?onDisplayError(n):alert(n)}function e(n){var t,i;return n&&(t=n.split("_"),t.length>=2)?(i=parseInt(t[t.length-1]),isNaN(i)?null:i):null}function f(n,t){return n&&t?"../"+n+"/"+t:null}function c(n){return n?n.find(t.general.DirtyFields).length>0:!1}function a(t){onKeyPressEnter&&onKeyPressEnter(t,function(){var r=t.target.value,i;IsNumeric&&IsNumeric(r)&&generateLocationUrl&&(i=u.directory.Operations+"/"+u.controllers.Company+"/"+u.actions.LookUpSupplierOnKeyEnter,i=generateLocationUrl(i),n.post(i,{supplierInfo:r},function(i){n(t.target).val(i)}))})}function v(n){n.preventDefault()}function tt(t){var i=n(t.currentTarget),f=i.is(":checkbox, :radio")?i[0].defaultChecked:i[0].defaultValue,r=null,u;i.is(":checkbox, :radio")?r=i[0].checked:i.data("kendoDropDownList")?(u=i.data("kendoDropDownList"),r=u.value()&&u.value().length>0?u.value():"0"):r=i.val();f!=r?i.attr("data-is-dirty",!0):i.removeAttr("data-is-dirty")}function o(n){var u="",r,t,i;if(n&&n.Errors)for(r=Object.keys(n.Errors),t=0;t<r.length;t++)if(i=n.Errors[r[t]],i.errors&&i.errors.length>0){u=i.errors[0];break}return u}function y(n,t){ht(n,ei,t)}function ei(t){var i,r;t.getAttribute("type")=="checkbox"?t.checked=t.defaultChecked:t.getAttribute("type")=="radio"?n(t).parents("form").find('input[name="'+t.getAttribute("name")+'"]').each(function(n,t){t.checked=t.defaultChecked}):t.getAttribute("data-role")=="dropdownlist"?(i=n(t).data("kendoDropDownList"),i&&(r=t.defaultValue.length==0?"0":t.defaultValue,i.select(function(n){var t=n.Value.length==0?"0":n.Value;return t==r}),i.trigger("change"))):t.value=t.defaultValue}function ct(n,t){ht(n,oi,t)}function oi(n){n.getAttribute("type")=="checkbox"||n.getAttribute("type")=="radio"?n.defaultChecked=n.checked:n.defaultValue=n.value}function it(i){i&&i.length>0&&(i.find(t.dropdownlists.DocumentSearchDropDownLists).each(function(){var t=n(this).data("kendoDropDownList");t!=undefined&&t.select(0)}),i.find(t.checkboxes.DocumentSearchIncludeDeleted).prop("checked",!1),i.find(t.checkboxes.DocumentSearchLatestRevision).prop("checked",!0),i.find(t.textboxes.DocumentSearchDocumentId).val(""),i.find(t.textboxes.DocumentSearchPartNumber).val(""),i.find(t.textboxes.DocumentSearchRevisionTitle).val(""),i.find(t.textboxes.DocumentSearchSupplierId).val(""),i.find(t.textboxes.DocumentSearchUPC).val(""))}function lt(n){return n&&n.length>0?{ContainerTypeId:n.find(t.dropdownlists.DocumentSearchContainerType).val(),DocumentLanguageId:n.find(t.dropdownlists.DocumentSearchLanguage).val(),DocumentRegionId:n.find(t.dropdownlists.DocumentSearchRegion).val(),DocumentStatusId:n.find(t.dropdownlists.DocumentSearchStatus).val(),DocumentTypeId:n.find(t.dropdownlists.DocumentSearchDocumentType).val(),IncludeDeletedDocument:n.find(t.checkboxes.DocumentSearchIncludeDeleted).is(":checked"),LatestRevisionOnly:n.find(t.checkboxes.DocumentSearchLatestRevision).is(":checked"),PartNumber:n.find(t.textboxes.DocumentSearchPartNumber).val(),PhysicalStateId:n.find(t.dropdownlists.DocumentSearchPhysicalState).val(),ReferenceId:n.find(t.textboxes.DocumentSearchDocumentId).val(),RevisionTitle:n.find(t.textboxes.DocumentSearchRevisionTitle).val(),SearchOption:n.find(t.general.DocumentSearchOptions+":checked").val(),SupplierId:extractCompanyIdFromTemplate?extractCompanyIdFromTemplate(n.find(t.textboxes.DocumentSearchSupplierId).val()):null,UPC:n.find(t.textboxes.DocumentSearchUPC).val()}:null}function at(){var i=n(t.grids.DocumentSearch).data("kendoGrid");i&&i.dataSource&&(i.dataSource.page(1),i.dataSource.read())}function si(i){i.preventDefault();var r=n(t.containers.NewDocument);r.length>0&&r.show(500)}function hi(i){var u,r;i.preventDefault();u=n(t.containers.DocumentSearch);it(u);r=n(t.grids.DocumentSearch).data("kendoGrid");r&&r.dataSource&&r.dataSource.data([])}function p(n){onKeyPressEnter&&onKeyPressEnter(n,at)}function ci(n){n.preventDefault();at()}function vt(t){if(generateLocationUrl){var f=u.controllers.Home+"/"+u.actions.OpenWindowVariable,e=generateLocationUrl(f);n(this).ajaxCall(e,{key:"newDocOpened",value:!0}).success(function(){var i=u.directory.Operations+"/"+u.controllers.Document+"/"+u.actions.AddNewDocument,r;i=n(this).getQueryStringParameterByName("docGuid")?n(this).getQueryStringParameterByName("inboundResponseid")?generateLocationUrl(i+"/?nnumber="+n(this).getQueryStringParameterByName("nnumber")+"&docGuid="+n(this).getQueryStringParameterByName("docGuid")+"&sid="+n(this).getQueryStringParameterByName("sid"))+"&inboundResponseid="+n(this).getQueryStringParameterByName("inboundResponseid")+"&productid="+t:generateLocationUrl(i+"/?nnumber="+n(this).getQueryStringParameterByName("nnumber")+"&docGuid="+n(this).getQueryStringParameterByName("docGuid")+"&sid="+n(this).getQueryStringParameterByName("sid")):generateLocationUrl(i);r=window.open(i,"_newDocumentPopUp","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=1280, height=1024");r.onload=function(){var t=this.document;n(t.body).find("#mainMenu").hide()};window.onbeforeunload=function(n){typeof n=="undefined"&&(n=window.event);n&&r.close()}}).error(function(){r(i.errors.AddNewDocumentPopUp)})}else r(i.errors.AddNewDocumentPopUp)}function yt(){var r=n(t.containers.DocumentSearchPopUp),i=r.find(t.grids.DocumentSearchPopUp).data("kendoGrid");i&&i.dataSource&&(i.dataSource.page(1),i.dataSource.read())}function pi(){vt()}function wi(i){var u,r;i.preventDefault();u=n(t.containers.DocumentSearchPopUp);it(u);r=u.find(t.grids.DocumentSearchPopUp).data("kendoGrid");r&&r.dataSource&&r.dataSource.data([])}function w(n){onKeyPressEnter&&onKeyPressEnter(n,yt)}function bi(n){n.preventDefault();yt()}function pt(r,e,o){var h=n(t.containers.NewDocument),l;c(h)==!0?(l={message:i.modals.DocumentNewDocumentDiscardChangesMessage,header:i.modals.DocumentNewDocumentDiscardChangesHeader},s(l,function(){e==!0&&y(h,rt);var t={files:et(h),documentId:0,revisionId:0};n.ajax({type:"POST",url:f(u.controllers.Document,u.actions.RemoveRevisionAttachment),data:t,beforeSend:function(){o==!0&&ut(h)}});r&&r()})):r&&r()}function rt(){var i=n(t.containers.NewDocument),r=n(t.containers.NewDocument).parents(t.containers.NewDocumentPopUp),u=r.length>0?fr:er;nt(i,t.buttons.DocumentNewDocumentSave,t.buttons.DocumentNewDocumentCancel,u)}function wt(){var i=n(t.containers.NewDocument),r;return i.length>0?(r={BestImageAvailable:i.find(t.checkboxes.DocumentRevisionDetailsBestImageAvailable).is(":checked"),ContainerTypeId:i.find(t.dropdownlists.DocumentDetailsContainerType).val(),JurisdictionId:i.find(t.dropdownlists.DocumentDetailsJurisdiction).val(),DocumentIdentification:i.find(t.textboxes.DocumentRevisionDetailsDocumentIdentification).val(),DocumentSourceId:i.find(t.dropdownlists.DocumentRevisionDetailsDocumentSource).val(),DocumentTypeId:i.find(t.dropdownlists.DocumentDetailsDocumentType).val(),DocumentVersion:i.find(t.textboxes.DocumentRevisionDetailsDocumentVersion).val(),IsBadImage:i.find(t.radiobuttons.DocumentRevisionDetailsIsBadImage).is(":checked"),IsGoodImage:i.find(t.radiobuttons.DocumentRevisionDetailsIsGoodImage).is(":checked"),IsMsdsNotRequired:i.find(t.checkboxes.DocumentDetailsIsMsdsNotRequired).is(":checked"),IsObsolete:i.find(t.checkboxes.DocumentDetailsIsObsolete).is(":checked"),IsPublic:i.find(t.checkboxes.DocumentDetailsIsPublic).is(":checked"),LanguageId:i.find(t.dropdownlists.DocumentDetailsLanguage).val(),ManufacturerId:null,RevisionDate:i.find(t.datepickers.DocumentRevisionDetailsRevisionDate).val(),RevisionId:i.find(t.textboxes.DocumentRevisionDetailsRevisionId).val(),RevisionTitle:i.find(t.textboxes.DocumentRevisionDetailsRevisionTitle).val(),SupplierId:null,VerifyDate:i.find(t.datepickers.DocumentRevisionDetailsVerifyDate).val()},extractCompanyIdFromTemplate&&(r.ManufacturerId=extractCompanyIdFromTemplate(i.find(t.textboxes.DocumentRevisionDetailsManufacturerId).val()),r.SupplierId=extractCompanyIdFromTemplate(i.find(t.textboxes.DocumentRevisionDetailsSupplierId).val())),r):null}function bt(){var i=n(t.containers.NewDocument);i.length>0&&i.hide(500)}function kt(){this.window.close()}function dt(u,f,e){var s=null,c="",h=n(t.containers.NewDocumentForm);if(s=n(this).getQueryStringParameterByName("docGuid")==""?{model:wt(),attachments:et(h)}:{model:wt(),docGuidId:n(this).getQueryStringParameterByName("docGuid")},s.model){if(s.attachments!=null&&s.attachments.length==0&&n(this).getQueryStringParameterByName("docGuid")==""&&s.model.ContainerTypeId!=2)return r(i.errors.SaveNewDocumentAttachmentError),!1;c=h.attr("action");n(this).ajaxCall(c,s).success(function(n){var t=o(n);t?r(t):(f==!0&&y(h,rt),e==!0&&ut(h),u&&u(n.DocumentId))}).error(function(){r(i.errors.SaveNewDocumentError)})}else r(i.errors.SaveNewDocumentError)}function gi(r){var f,u;l(i.success.DocumentSaved);f=n(t.containers.DocumentSearch);f.length>0&&(it(f),f.find(t.textboxes.DocumentSearchDocumentId).val(r),u=n(t.containers.DocumentMain).find(t.grids.DocumentSearch).data("kendoGrid"),u&&(u.bind("dataBound",function e(){var n=u.wrapper.find("tr.k-master-row:first");u.select(n);u.expandRow(n);u.unbind("dataBound",e)}),u.dataSource.read()));bt()}function nr(i){if(n(this).getQueryStringParameterByName("docGuid")==""){if(window.opener){var r=n(window.opener.document).find(t.containers.DocumentSearchPopUp);r.length>0&&(r.find(t.buttons.DocumentSearchClear).trigger("click"),r.find(t.textboxes.DocumentSearchDocumentId).val(i),r.find(t.buttons.DocumentSearchSearch).click())}}else parent.window.opener.location.reload();kt()}function tr(u){if(u.preventDefault(),n(u.currentTarget).hasClass("k-state-disabled"))return!1;if(displayUploadModal){var f=0,e=0;displayUploadModal(function(){return{documentId:f,revisionId:e}},function(i){var u=n(t.containers.NewDocument),o=u.length>0?u.find(t.grids.DocumentRevisionAttachments).data("kendoGrid"):null,r;if(o)for(r=0;r<i.length;r++)o.dataSource.add({DocumentInfoId:0,DocumentId:f,RevisionId:e,DocumentInfoDescription:"",DocumentElink:i[r].elink,FileName:i[r].filename,PhysicalPath:i[r].physicalPath})},!1)}else r(i.errors.DocumentRevisionAttachmentPopUp)}function ir(n){n.preventDefault();pt(bt,!0,!0)}function rr(n){tt(n);rt()}function ur(n){n.preventDefault();pt(kt)}function fr(n){n.preventDefault();dt(nr)}function er(n){n.preventDefault();dt(gi,!0,!0)}function gt(){var i=new Date,n=i.getDate(),t=i.getMonth()+1,r=i.getFullYear();return n<10&&(n="0"+n),t<10&&(t="0"+t),t+"/"+n+"/"+r}function ni(n){nt(n,t.buttons.DocumentDetailsSave,t.buttons.DocumentDetailsCancel,vr,!0)}function hr(i,e){var o,s;!i&&e&&(i=n(t.containers.DocumentDetailsFormExact+e));o=cr(i,e);o&&(s=f(u.controllers.Document,u.actions.GetStatusAction),n.post(s,o,function(n){n.displayMessage?n.statusError==!0?r(n.displayMessage):displayStatusNoteConfirmation&&displayStatusNoteConfirmation(n,function(n){o.StatusNotes=n.modalNotes;ti(i,o)}):ti(i,o)}))}function cr(i,r){return(!i&&r&&(i=n(t.containers.DocumentDetailsFormExact+r)),i&&i.length>0)?{ContainerTypeId:i.find(t.dropdownlists.DocumentDetailsContainerType).val(),DocumentId:i.find(t.textboxes.DocumentDetailsDocumentId).val(),DocumentLanguageId:i.find(t.dropdownlists.DocumentDetailsLanguage).val(),DocumentJurisdictionId:i.find(t.dropdownlists.DocumentDetailsJurisdiction).val(),DocumentStatusId:i.find(t.dropdownlists.DocumentDetailsStatus).val(),DocumentTypeId:i.find(t.dropdownlists.DocumentDetailsDocumentType).val(),IsMsdsNotRequired:i.find(t.checkboxes.DocumentDetailsIsMsdsNotRequired).is(":checked"),IsObsolete:i.find(t.checkboxes.DocumentDetailsIsObsolete).is(":checked"),IsPublic:i.find(t.checkboxes.DocumentDetailsIsPublic).is(":checked"),StatusNotes:i.find(t.hidden.DocumentDetailsStatusNotes).val()}:null}function ti(u,f){if(u&&f){var e=u.attr("action");n.post(e,f,function(e){var a=o(e),h,s,c;a?r(a):(l(i.success.DocumentSaved),h=u.find(t.general.DocumentLastUpdatePopOver),h.length>0&&(h.data("popover").options.content=e.LastUpdatedDescription),s=u.find(t.dropdownlists.DocumentDetailsStatus),s.length>0&&s[0].defaultValue!=s.val()&&(c=n(t.grids.DocumentStatusHistory+f.DocumentId).data("kendoGrid"),c&&(c.dataSource.read(),ot(f.DocumentId,""))),u.find(t.hidden.DocumentDetailsStatusNotes).val(""),ct(u,ni))})}}function lr(r){var u,f,e;r.preventDefault();u=n(r.currentTarget).parents(t.containers.DocumentDetailsTab+".k-tabstrip").data("kendoTabStrip");f=n(r.currentTarget).parents(t.containers.DocumentDetailsForm);u&&f.length>0&&(c(f)==!0?(e={message:i.modals.DocumentDiscardChangesMessage,header:i.modals.DocumentDiscardChangesHeader},s(e,function(){u.reload(u.element.find("li[aria-selected=true]:first"))})):u.reload(u.element.find("li[aria-selected=true]:first")))}function ar(i){tt(i);var r=n(i.currentTarget);ni(r.parents(t.containers.DocumentDetailsForm+":first"))}function vr(u){u.preventDefault();var f=e(u.currentTarget.getAttribute("id")),o=n(t.containers.DocumentDetailsFormExact+f);o.length>0?hr(o,f):r(i.errors.SaveDocumentError)}function b(n){var i=n.find(t.textboxes.DocumentRevisionDetailsRevisionId).val()!="0";nt(n,t.buttons.DocumentRevisionDetailsSave,t.buttons.DocumentRevisionDetailsCancel,su,i)}function ut(n){if(n){var i=n.find(t.grids.DocumentRevisionAttachments).data("kendoGrid");i&&i.dataSource&&(i.dataSource.data([]),n.find(t.buttons.DocumentRevisionNewFile).removeClass("k-state-disabled"))}}function ft(n){if(n){var i=t.textboxes.DocumentRevisionDetailsSupplierId;return(n.is(t.buttons.DocumentRevisionDetailsManufacturerSearch)||n.is(t.buttons.DocumentRevisionDetailsManufacturerView)||n.is(t.buttons.DocumentRevisionDetailsSetUnknownManufacturer))&&(i=t.textboxes.DocumentRevisionDetailsManufacturerId),i}return null}function et(i){var o=n(this).getQueryStringParameterByName("docGuid")!=""?i.find(t.grids.DocumentFromInboundResponse).data("kendoGrid"):i.find(t.grids.DocumentRevisionAttachments).data("kendoGrid"),f=i&&i.length>0?o:null,e,u,r;if(f&&f.dataSource){for(e=[],u=f.dataSource.data(),r=0;r<u.length;r++)e.push({DocumentId:u[r].DocumentId,RevisionId:u[r].RevisionId,PhysicalPath:u[r].PhysicalPath});return e}}function pr(i,r,u){var h=n(this).getQueryStringParameterByName("docGuid")!=""?i.find(t.grids.DocumentFromInboundResponse).data("kendoGrid"):i.find(t.grids.DocumentRevisionAttachments).data("kendoGrid"),f=i&&i.length>0?h:null,e,s,o;if(f&&f.dataSource){for(e=[],s=f.dataSource.data(),o=0;o<s.length;o++)e.push({DocumentId:r,RevisionId:u,PhysicalPath:"",DocumentDBGuidId:n(this).getQueryStringParameterByName("docGuid")});return e}}function wr(i,r,u){if(!i&&r&u&&(i=(u||0)==0?n(t.containers.DocumentNewRevision+r):n(t.containers.DocumentRevision+r)),i&&i.length>0){var f={BestImageAvailable:i.find(t.checkboxes.DocumentRevisionDetailsBestImageAvailable).is(":checked"),DocumentId:i.find(t.textboxes.DocumentRevisionDetailsDocumentId).val(),DocumentIdentification:i.find(t.textboxes.DocumentRevisionDetailsDocumentIdentification).val(),DocumentSourceId:i.find(t.dropdownlists.DocumentRevisionDetailsDocumentSource).val(),DocumentVersion:i.find(t.textboxes.DocumentRevisionDetailsDocumentVersion).val(),IsBadImage:i.find(t.radiobuttons.DocumentRevisionDetailsIsBadImage).is(":checked"),IsGoodImage:i.find(t.radiobuttons.DocumentRevisionDetailsIsGoodImage).is(":checked"),ManufacturerId:null,RevisionDate:i.find(t.datepickers.DocumentRevisionDetailsRevisionDate).val(),RevisionId:i.find(t.textboxes.DocumentRevisionDetailsRevisionId).val(),RevisionTitle:i.find(t.textboxes.DocumentRevisionDetailsRevisionTitle).val(),SupplierId:null,VerifyDate:i.find(t.datepickers.DocumentRevisionDetailsVerifyDate).val()};return extractCompanyIdFromTemplate&&(f.ManufacturerId=extractCompanyIdFromTemplate(i.find(t.textboxes.DocumentRevisionDetailsManufacturerId).val()),f.SupplierId=extractCompanyIdFromTemplate(i.find(t.textboxes.DocumentRevisionDetailsSupplierId).val())),f}return null}function br(i,r,u){if(!i&&r&u&&(i=(u||0)==0?n(t.containers.DocumentNewRevision+r):n(t.containers.DocumentRevision+r)),i&&i.length>0){var f={BestImageAvailable:i.find(t.checkboxes.DocumentRevisionDetailsBestImageAvailable).is(":checked"),DocumentId:i.find(t.textboxes.DocumentRevisionDetailsDocumentId).val(),DocumentIdentification:i.find(t.textboxes.DocumentRevisionDetailsDocumentIdentification).val(),DocumentSourceId:i.find(t.dropdownlists.DocumentRevisionDetailsDocumentSource).val(),DocumentVersion:i.find(t.textboxes.DocumentRevisionDetailsDocumentVersion).val(),IsBadImage:i.find(t.radiobuttons.DocumentRevisionDetailsIsBadImage).is(":checked"),IsGoodImage:i.find(t.radiobuttons.DocumentRevisionDetailsIsGoodImage).is(":checked"),ManufacturerId:null,RevisionDate:i.find(t.datepickers.DocumentRevisionDetailsRevisionDate).val(),RevisionId:i.find(t.textboxes.DocumentRevisionDetailsRevisionId).val(),RevisionTitle:i.find(t.textboxes.DocumentRevisionDetailsRevisionTitle).val(),DocumentDBGuidId:n(this).getQueryStringParameterByName("docGuid"),SupplierId:null,VerifyDate:i.find(t.datepickers.DocumentRevisionDetailsVerifyDate).val()};return extractCompanyIdFromTemplate&&(f.ManufacturerId=extractCompanyIdFromTemplate(i.find(t.textboxes.DocumentRevisionDetailsManufacturerId).val()),f.SupplierId=extractCompanyIdFromTemplate(i.find(t.textboxes.DocumentRevisionDetailsSupplierId).val())),f}return null}function kr(u){var e,f,o;if(u.preventDefault(),n(u.currentTarget).hasClass("k-state-disabled"))return!1;displayUploadModal?(e=n(this).parents(t.containers.DocumentNewRevisionDetails+":first"),e.length>0?(f=e.find(t.textboxes.DocumentRevisionDetailsDocumentId).val(),o=0,displayUploadModal(function(){return{documentId:f,revisionId:o}},function(i){var u=n(t.containers.DocumentNewRevisionDetailsExact+f),e=u.length>0?u.find(t.grids.DocumentRevisionAttachments).data("kendoGrid"):null,r;if(e)for(r=0;r<i.length;r++)e.dataSource.add({DocumentInfoId:0,DocumentId:f,RevisionId:o,DocumentInfoDescription:"",DocumentElink:i[r].elink,FileName:i[r].filename,PhysicalPath:i[r].physicalPath})},!1)):r(i.errors.DocumentRevisionAttachmentData)):r(i.errors.DocumentRevisionAttachmentPopUp)}function dr(r){var u,f;r.preventDefault();u=n(r.currentTarget).parents("ul"+t.containers.DocumentNewRevisionDetails+":first");u.length>0&&(c(u)==!0?(f={message:i.modals.DocumentRevisionDiscardChangesMessage,header:i.modals.DocumentRevisionDiscardChangesHeader},s(f,function(){y(u,b);u.hide(500)})):u.hide(500))}function gr(t){var r,u;t.preventDefault();window.opener=self;r=n(t.currentTarget).parents("ul[id^=pnlNewRevision]");r.length>0&&(c(r)==!0?(u={message:i.modals.DocumentRevisionDiscardChangesMessage,header:i.modals.DocumentRevisionDiscardChangesHeader},s(u,function(){y(r,b);window.close()})):window.close())}function ii(e){e.preventDefault();var l={message:i.modals.DocumentRevisionDeleteAttachmentMessage,header:i.modals.DocumentRevisionDeleteAttachmentHeader},c=n(this).parents(t.grids.DocumentRevisionAttachments).data("kendoGrid"),h=c?c.dataItem(n(e.currentTarget).parents("[data-uid]")):null;h?s(l,function(){n(this).ajaxCall(f(u.controllers.Document,u.actions.RemoveRevisionAttachment),{files:[{FileName:h.FileName,PhysicalPath:h.PhysicalPath}],documentId:h.DocumentId,revisionId:h.RevisionId}).success(function(t){var i=o(t);i?r(i):(c.dataSource.remove(h),h.DocumentId==0&&n("#addNewFilesBtn_New").removeClass("k-state-disabled"))}).error(function(){r(i.errors.DocumentRevisionAttachmentDelete)})}):r(i.errors.DocumentRevisionAttachmentDelete)}function nu(i){i.preventDefault();var u=e(i.currentTarget.getAttribute("id")),r=n(t.containers.DocumentNewRevisionDetailsExact+u);r.length>0&&(lu(r),r.show(650))}function tu(i){var u;if(i.preventDefault(),u=n(i.currentTarget).parents(t.containers.DocumentRevisionDetails+":first"),u.length!=0){var f=u.find(t.textboxes.DocumentRevisionDetailsRevisionId).val(),e=u.find(t.textboxes.DocumentRevisionDetailsDocumentId).val(),r=n(t.containers.DocumentRevisionMultipleNameNumbers);r.length>0&&f&&(r.find(t.hidden.DocumentRevisionNameNumberDocument).val(e),r.find(t.hidden.DocumentRevisionNameNumberRevision).val(f),r.find(t.textboxes.DocumentRevisionMultipleNameNumbers).val(""),r.find(t.dropdownlists.DocumentRevisionMultipleNameNumbersType).data("kendoDropDownList").select(0),r.modal({backdrop:!0,keyboard:!0}).css({"margin-left":function(){return-(n(this).width()/2)}}))}}function iu(e){e.preventDefault();var a={message:i.modals.DocumentRevisionDeleteAttachmentMessage,header:i.modals.DocumentRevisionDeleteAttachmentHeader},c=n(this).parents(t.grids.DocumentRevisionAttachments),h=c.data("kendoGrid"),l=h?h.dataItem(h.select()):null;l?s(a,function(){n(this).ajaxCall(f(u.controllers.Document,u.actions.DeleteDocumentFile),{DocumentInfoId:l.DocumentInfoId}).success(function(t){var u=o(t);u?r(u):(h.bind("dataBound",function f(){h.unbind("dataBound",f);var t=this;t.dataSource&&t.dataSource.data().length!=0||r(i.warnings.DocumentRevisionAttachments);t.dataSource.data().length==0&&n("[id*=addNewFilesBtn]",c).removeClass("k-state-disabled")}),h.dataSource.read())})}):r(i.errors.DocumentRevisionAttachmentDelete)}function ru(e){var a,c,h,o;e.preventDefault();var s=n(e.currentTarget).parents(".modal:first"),v=s.find(t.textboxes.DocumentRevisionMultipleNameNumbers).val(),y=s.find(t.dropdownlists.DocumentRevisionMultipleNameNumbersType).val();if(!v||!y){s.modal("hide");r(i.errors.DocumentRevisionMultipleNameNumbersRequiredInformation);return}for(a=[],c=v.split(/\n/),h=0;h<c.length;h++)c[h].length>0&&a.push(n.trim(c[h]));o={};o.documentId=s.find(t.hidden.DocumentRevisionNameNumberDocument).val();o.revisionId=s.find(t.hidden.DocumentRevisionNameNumberRevision).val();o.aliasTypeId=y;o.aliasesText=a;n(this).ajaxJSONCall(f(u.controllers.Document,u.actions.CreateMultipleNameNumbers),JSON.stringify(o)).success(function(u){if(u.success==!0){s.modal("hide");var f=n(t.grids.DocumentRevisionNameNumbers+o.revisionId).data("kendoGrid");f&&f.dataSource.read()}else r(i.errors.DocumentRevisionMultipleNameNumbers)}).error(function(){r(i.errors.DocumentRevisionMultipleNameNumbers)}).complete(function(){l(i.success.DocumentRevisionMultipleNameNumbersSaved)})}function uu(t){if(t.keyCode==st.Enter||t.ctrlKey&&t.keyCode==st.V){var r=t.currentTarget.value.split("\n"),i=[];n(r).each(function(t,r){r.length>0&&n.inArray(r,i)==-1&&i.push(r)});t.currentTarget.value="";n(i).each(function(n,i){t.currentTarget.value=t.currentTarget.value+i+"\n"})}}function ri(t){t.preventDefault();var i=n(t.currentTarget);displaySupplierPopUp&&displaySupplierPopUp(function(n){var t=ft(i),r;t&&(r=getCompanyTemplate?getCompanyTemplate(n.CompanyId,n.Name):n.CompanyId+", "+n.Name,i.siblings(t+":first").val(r).trigger("change"))})}function k(t){var u,f,o,e,s;(t.preventDefault(),u=n(t.currentTarget),f=ft(u),f)&&(o=u.siblings(f+":first").val(),e=extractCompanyIdFromTemplate?extractCompanyIdFromTemplate(o):null,e&&generateLocationUrl?(s=generateLocationUrl("Operations/Company/LoadSingleSupplier?supplierId="+e),window.open(s,"_blank")):r(i.errors.CompanyViewError))}function fu(o){var h,s,c;if(o.preventDefault(),n(o.currentTarget).hasClass("k-state-disabled"))return!1;displayUploadModal?(h=n(this).parents(t.containers.DocumentRevisionDetails+":first"),h.length>0?(s=h.find(t.textboxes.DocumentRevisionDetailsDocumentId).val(),c=e(this.getAttribute("id")),displayUploadModal(function(){return{documentId:s,revisionId:c}},function(e){var a=n.Deferred();return setTimeout(function(){var v=n(t.dropdownlists.DocumentDetailsContainerTypeExact+s).val();v=="2"&&e.length>1?(r(i.errors.DocumentRevisionKitAttachments),a.reject()):n(this).ajaxCall(f(u.controllers.Document,u.actions.SaveDocumentRevisionAttachments),{files:e.map(function(n){return{FileName:n.filename,PhysicalPath:n.physicalPath,DocumentId:s,RevisionId:c}}),documentId:s,revisionId:c,isNewRevision:!1}).success(function(u){if(u.message=="Error"||u.success==!1)r(i.errors.DocumentRevisionAttachment),a.reject();else{var f=h.find(t.grids.DocumentRevisionAttachments).data("kendoGrid");f&&f.dataSource.read();l(i.success.DocumentRevisionAttachmentsSaved);a.resolve();n(o.currentTarget).addClass("k-state-disabled")}}).error(function(){r(i.errors.DocumentRevisionAttachment);a.reject()})},750),a.promise()})):r(i.errors.DocumentRevisionAttachmentData)):r(i.errors.DocumentRevisionAttachmentPopUp)}function eu(r){var u,f;r.preventDefault();u=n(r.currentTarget).parents("ul"+t.containers.DocumentRevisionDetails+":first").data("kendoPanelBar");u&&(c(u.element)==!0?(f={message:i.modals.DocumentRevisionDiscardChangesMessage,header:i.modals.DocumentRevisionDiscardChangesHeader},s(f,function(){u.reload(u.element.find("li:first"))})):u.reload(u.element.find("li:first")))}function ou(i){tt(i);var r=n(i.currentTarget);b(r.parents(t.containers.DocumentRevisionDetailsForm+":first"))}function su(u){var f,e,s;if(u.preventDefault(),f=n(u.currentTarget).parents(t.containers.DocumentRevisionDetailsForm+":first"),e={model:wr(f),attachments:et(f)},e.model){if(e.model.RevisionId==0&&e.attachments.length==0)return r(i.errors.SaveNewDocumentRevisionAttachmentError),!1;s=f.attr("action");n(this).ajaxCall(s,e).success(function(n){var c=o(n),s,u,h;c?r(c):(l(i.success.DocumentRevisionSaved),ct(f,b),e.model.RevisionId==0?(f.parents("ul"+t.containers.DocumentNewRevisionDetails).hide(500),s=f.parents(t.containers.DocumentDetailsTab+":first"),s.length>0&&(u=s.find(t.grids.DocumentRevision).data("kendoGrid"),u&&(u.dataSource.bind("change",function a(){u.expandRow(u.wrapper.find("tr.k-master-row:first"));u.dataSource.unbind("change",a)}),u.dataSource.read())),ut(f)):(h=f.find(t.general.DocumentRevisionLastUpdatePopOver),h.length>0&&(h.data("popover").options.content=n.LastUpdatedDescription)))}).error(function(){r(i.errors.SaveDocumentRevisionError)})}else r(i.errors.SaveDocumentRevisionError)}function hu(u){var h;u.preventDefault();var s=location.search.substring(1).split("&")[1].split("=")[1],e=n(u.currentTarget).parents(t.containers.DocumentRevisionDetailsForm+":first"),f={model:br(e,s,0),attachments:pr(e,s,0)};if(f.model){if(f.model.RevisionId==0&&f.attachments.length==0)return r(i.errors.SaveNewDocumentRevisionAttachmentError),!1;h=e.attr("action");n(this).ajaxCall(h,f).success(function(n){var t=o(n);t?r(t):(parent.window.opener.location.reload(),window.close())}).error(function(){r(i.errors.SaveDocumentRevisionError)})}else r(i.errors.SaveDocumentRevisionError)}function cu(t){var i,e,o;(t.preventDefault(),i=n(t.currentTarget),e=ft(i),e)&&(o=f(u.controllers.Document,u.actions.LoadUnknownManufacturer),n(this).ajaxCall(o).success(function(n){if(n!=""){var t=i.siblings(e+":first");t.val(n).trigger("change")}}).error(function(n,t,i){r(i)}))}function lu(n){n&&n.length>0&&(n.find(t.checkboxes.DocumentRevisionDetailsBestImageAvailable).prop("checked",!1),n.find(t.checkboxes.DocumentRevisionDetailsDocumentVersion).val(""),n.find(t.datepickers.DocumentRevisionDetailsRevisionDate).val(""),n.find(t.datepickers.DocumentRevisionDetailsVerifyDate).val(""),n.find(t.radiobuttons.DocumentRevisionDetailsIsBadImage).prop("checked",!1),n.find(t.radiobuttons.DocumentRevisionDetailsIsGoodImage).prop("checked",!1),n.find(t.textboxes.DocumentRevisionDetailsDocumentIdentification).val(""),n.find(t.textboxes.DocumentRevisionDetailsDocumentVersion).val(""),n.find(t.textboxes.DocumentRevisionDetailsManufacturerId).val(""),n.find(t.textboxes.DocumentRevisionDetailsRevisionTitle).val(""),n.find(t.textboxes.DocumentRevisionDetailsSupplierId).val(""),n.find(t.buttons.DocumentRevisionNewFile).removeClass("k-state-disabled"))}function ui(i,r){if(i){var u=n(t.containers.DocumentNotes+i);u.length>0&&u.html(r)}}function bu(){var t=n("div.validation-summary-valid.validationSummary ul");t.length!=0&&(t.find("li").remove(),n("#Notes").val().length==0?t.append(g.DocumentNoteRequiredNotes):t.find("li").remove(".notes-required"),n("#NoteTypeId").val().length==0?t.append(g.DocumentNoteRequiredNoteType):t.find("li").remove(".note-type-required"),t.append(g.BlankListItem))}function ku(i){var r,u,f;i.preventDefault();r=n(t.grids.DocumentNotes+i.data.documentId).data("kendoGrid");r&&(u=r.dataItem(r.select()),r.dataSource.read(),u&&(f=r.dataSource.get(u.id).uid,r.select('tr[data-uid="'+f+'"]')))}function fi(n){var i,t,r;return n&&(i="documentId=",t=n.indexOf(i)+i.length,t>0&&t<n.length)?(r=n.substring(t),r?r:null):null}function tf(s){s.preventDefault();var h=e(this.getAttribute("id"));displayDocumentPopUp&&displayDocumentPopUp(function(e){var s=n(t.dropdownlists.DocumentContainerClassificationType+h).data("kendoDropDownList"),l=s?s.value():"",c=s?s.text():"",a={ChildDocumentId:c.indexOf("Parents")>=0?h:e.ReferenceId,ClassificationTypeId:l,ParentDocumentId:c.indexOf("Parents")>=0?e.ReferenceId:h};n(this).ajaxCall(f(u.controllers.Document,u.actions.SaveDocumentContainerComponent),a).success(function(n){var t=o(n);t?r(t):d(s.element.attr("id"))}).error(function(){r(i.errors.SaveDocumentContainerComponent)})})}function rf(){var c=n(this).parents('tr[role="row"]'),e=n(this).parents(".k-grid:first").data("kendoGrid"),t=e?e.dataItem(c):null,h;t&&(h={header:i.modals.DocumentDeleteContainerComponentHeader,message:i.modals.DocumentDeleteContainerComponentMessage},s(h,function(){var s={ChildDocumentId:t.ChildDocumentId,ContainerTypeId:t.ContainerTypeId,KitGroupContainerId:t.KitGroupContainerId,ParentDocumentId:t.ParentDocumentId};n(this).ajaxCall(f(u.controllers.Document,u.actions.RemoveDocumentContainerComponent),s).success(function(n){var t=o(n);t?r(t):d(e.element.attr("id"))}).error(function(){r(i.errors.DocumentContainerComponentDelete)})}))}function d(i){var u=e(i),r;u&&(r=n(t.grids.DocumentContainerComponents+u).data("kendoGrid"),r&&r.dataSource.read())}function ot(i,r){if(i){var u=n(t.containers.DocumentStatusHistory+i);u.length>0&&u.html(r)}}var u={actions:{AddNewDocument:"AddNewDocument",CreateMultipleNameNumbers:"NamesNumbers_Multiple_Create",DeleteDocumentFile:"DeleteDocumentFile",GetStatusAction:"GetStatusAction",LoadUnknownManufacturer:"LoadUnknownManufacturer",LookUpSupplierOnKeyEnter:"LookUpSupplierOnKeyEnter",OpenWindowVariable:"OpenWindowVariable",RemoveDocumentContainerComponent:"RemoveDocumentContainerComponent",RemoveRevisionAttachment:"RemoveAttachmentAlt",SaveDocumentContainerComponent:"SaveDocumentContainerComponent",SaveDocumentRevisionAttachments:"SaveDocumentRevisionAttachments",UpdateDocumentInfoDescription:"UpdateDocumentInfoDescriptionAlt",ClearSessionVariablesDocument:"ClearSessionsVariables",GetSupplierName:"GetSupplierName"},contenttype:{Json:"application/json; charset=utf-8"},controllers:{Company:"Company",Document:"Document",Home:"Home"},directory:{Operations:"Operations"}},g={BlankListItem:"<li style='display:none'>",DocumentNoteRequiredNotes:"<li class='notes-required'>Document - Notes is required<\/li>",DocumentNoteRequiredNoteType:"<li class='note-type-required'>Document - Type is required<\/li>"},h={CancelIcon:"k-i-cancel",DisabledButtonLink:"disabled-link",RefreshIcon:"k-i-refresh"},t={buttons:{DocumentAddContainerComponents:"[id^=btnAddContainerComponent_]",DocumentDeleteContainerComponent:".document-container-delete",DocumentDetailsCancel:"[id^=btnDocumentCancel_]",DocumentDetailsSave:"[id^=btnDocumentSave_]",DocumentNewDocumentCancel:"#btnNewDocumentCancel",DocumentNewDocumentSave:"#btnNewDocumentSave",DocumentRevisionAddMultipleNameNumbers:".rev-multinamenum-add",DocumentRevisionAddNewRevision:"[id^=btnAddDocumentRevision_]",DocumentRevisionDetailsAddAttachment:"[id^=addNewFilesBtn_]",DocumentRevisionDetailsDeleteAttachment:".revision-attachment-delete",DocumentRevisionDetailsCancel:"[id^=btnDocumentRevisionCancel_]",DocumentRevisionDetailsManufacturerSearch:"[id^=revisionMfgIdBtn_]",DocumentRevisionDetailsManufacturerView:"[id^=viewRevisionManufacturerIdBtn_]",DocumentRevisionDetailsSave:"[id^=btnDocumentRevisionSave_]",DocumentRevisionDetailsSetUnknownManufacturer:"[id^=btnSetUnknownMfg_]",DocumentRevisionDetailsSupplierSearch:"[id^=revisionSupplierIdBtn_]",DocumentRevisionDetailsSupplierView:"[id^=viewRevisionSupplierIdBtn_]",DocumentRevisionMultipleNameNumbersSave:"#btnSaveMultipleNames",DocumentSearchAddNew:"#addNewDocumentBtn",DocumentRevisionNewFile:"[id^=addNewFilesBtn_New]",DocumentSearchClear:"#clearDocumentBtn",DocumentSearchPopUpCancel:"#btnCancelDocumentSearch",DocumentSearchPopUpSelect:"#searchDocumentIdSelect",DocumentSearchSearch:"#searchDocumentBtn",DocumentSearchSearchSupplier:"#searchSupplierIdBtn"},checkboxes:{DocumentDetailsIsMsdsNotRequired:"[id^=IsMsdsNotRequired_]",DocumentDetailsIsObsolete:"[id^=IsObsolete_]",DocumentDetailsIsPublic:"[id^=IsPublic_]",DocumentRevisionDetailsBestImageAvailable:"[id^=BestImageAvailable_]",DocumentSearchIncludeDeleted:"[id^=chkIncludeDeletedDocument]",DocumentSearchLatestRevision:"[id^=chkLatestRevision]"},containers:{CreatedMessage:"#CreatedMessage",DocumentMain:"#DocumentMainContainer",DocumentSearch:"#divSearchSection",DocumentSearchPopUp:"#documentSearchWindow",DocumentDetailsForm:"[id^=frmDocument_]",DocumentDetailsFormExact:"#frmDocument_",DocumentDetailsTab:"[id^=tbDocumentDetail_]",DocumentNewRevisionDetails:"[id^=pnlNewRevision_]",DocumentNewRevisionDetailsExact:"#pnlNewRevision_",DocumentNotes:"#DocumentNotesText_",DocumentRevisionDetailsForm:"[id^=frmDocumentRevision_]",DocumentRevisionDetails:"[id^=pnlRevisionDetail_]",DocumentRevisionMultipleNameNumbers:"#mdlMultipleNames",DocumentStatusHistory:"#StatusNotesText_",NewDocument:"#pnlNewDocument",NewDocumentForm:"#frmNewDocument",NewDocumentPopUp:".add-new-document-popup",NewRevision:"#pnlNewRevision",NewRevisionPopUp:".add-new-revision-popup"},datepickers:{DocumentRevisionDetailsRevisionDate:"[id^=RevisionDate_]",DocumentRevisionDetailsVerifyDate:"[id^=VerifyDate_]"},dropdownlists:{DocumentContainerClassificationType:"#ClassificationType_",DocumentDetailsContainerTypeExact:"#ContainerTypeId_",DocumentDetailsContainerType:"[id^=ContainerTypeId_]",DocumentDetailsDocumentType:"[id^=DocumentTypeId_]",DocumentDetailsLanguage:"[id^=DocumentLanguageId_]",DocumentDetailsJurisdiction:"[id^=DocumentJurisdictionId_]",DocumentDetailsStatus:"[id^=DocumentStatusId_]",DocumentRevisionDetailsDocumentSource:"[id^=DocumentSourceId_]",DocumentRevisionMultipleNameNumbersType:"#selNameType",DocumentSearchContainerType:"[id^=ddlDocumentContainer]",DocumentSearchDocumentType:"[id^=ddlDocumentType]",DocumentSearchDropDownLists:"[data-role=dropdownlist]",DocumentSearchLanguage:"[id^=ddlDocumentLanguage]",DocumentSearchPhysicalState:"[id^=ddlDocumentPhysicalState]",DocumentSearchRegion:"[id^=ddlDocumentRegion]",DocumentSearchStatus:"[id^=DocumentStatusId]"},general:{DirtyFields:"input[data-is-dirty=true]",DocumentLastUpdatePopOver:"[id^=doc-I-Info-]",DocumentRevisionLastUpdatePopOver:"[id^=rev-I-Info-]",DocumentSearchOptions:"input[name=radiogroupTitleSearchOption]"},grids:{DocumentContainerComponents:"#gdContainerComponents_",DocumentNotes:"#gdDocumentNotes_",DocumentRevision:"[id^=gdDocumentRevisions_]",DocumentRevisionAttachments:"[id^=gdRevisionFileInfoDetail_]",DocumentFromInboundResponse:"#gdDocumentFromInboundResponse",DocumentRevisionNameNumbers:"#gdRevisionNameNumber_",DocumentSearch:"#gdSearchDocument",DocumentSearchPopUp:"#gdSearchDocumentPopUp",DocumentStatusHistory:"#gdSupplierStatusHistory_"},hidden:{DocumentDetailsStatusNotes:"[id^=hdnStatusNotes_]",DocumentRevisionNameNumberDocument:"#hdnMultipleNameDocument",DocumentRevisionNameNumberRevision:"#hdnMultipleNameRevision"},radiobuttons:{DocumentRevisionDetailsIsBadImage:"[id^=IsBadImage_]",DocumentRevisionDetailsIsGoodImage:"[id^=IsGoodImage_]"},textboxes:{DocumentDetailsDocumentId:"[id^=DocumentId_]",DocumentNotes:"#Notes",DocumentRevisionDetailsDocumentId:"[id^=RevisionDocumentId_]",DocumentRevisionDetailsDocumentIdentification:"[id^=DocumentIdentification_]",DocumentRevisionDetailsDocumentVersion:"[id^=DocumentVersion_]",DocumentRevisionDetailsRevisionId:"[id^=RevisionId_]",DocumentRevisionDetailsManufacturerId:"[id^=txtManufacturerId_]",DocumentRevisionDetailsRevisionTitle:"[id^=RevisionTitle_]",DocumentRevisionDetailsSupplierId:"[id^=txtSupplierId_]",DocumentRevisionMultipleNameNumbers:"#txtNamesNumbers",DocumentSearchDocumentId:"[id^=txtSearchDocumentId]",DocumentSearchPartNumber:"[id^=txtSearchPartNumber]",DocumentSearchRevisionTitle:"[id^=txtRevisionTitle]",DocumentSearchSupplierId:"[id^=txtSearchSupplierId]",DocumentSearchUPC:"[id^=txtSearchUPC]"}},i={errors:{AddNewDocumentPopup:"An error occured displaying the add new document screen. Please container you adminstrator.",AddNewRevisionPopup:"An error occured displaying the add new revision screen. Please container you adminstrator.",CompanyViewError:"An error occurred displaying the selected company. Please review you selection and try again.",ConfirmationDateFuture:"Invalid confirmation date, it can't be a future date.",ConfirmationDateGreaterThanRevisionDate:"Invalid confirmation date, it must be greater than or equal to revision date.",DocumentContainerComponentDelete:"An error occurred deleting the selected container component.",DocumentRevisionAttachment:"An error occurred uploading the revision attachment(s). Please try again.",DocumentRevisionAttachmentData:"An error occurred retrieving information to save the revision attachment. Please try again.",DocumentRevisionAttachmentDelete:"An error occurred deleting the selected revision attachment.",DocumentRevisionAttachmentDescriptionUpdate:"An error occurred updating the attachment description.",DocumentRevisionAttachmentPopUp:"An error occurred displaying the upload popup. Please contact your administrator.",DocumentRevisionKitAttachments:"A kit can only have on cover sheet, please move the existing on first.",DocumentRevisionMultipleNameNumbers:"An error occurred saving the revision's name number values.",DocumentRevisionMultipleNameNumbersRequiredInformation:"Alias Type and Aliases are required.",Error:"Error",RevisionDateFuture:"Invalid revision date, it can't be a future date.",SaveDocumentError:"Saving the document could not be completed. Please review your changes and try again.",SaveDocumentContainerComponent:"Saving the document container component could not be complete. Please try again.",SaveDocumentRevisionError:"Save the document revision could not be completed. Please review your changes and try again.",SaveNewDocumentAttachmentError:"New documents cannot be created without an attachment. Add an attachment and please try again.",SaveNewDocumentError:"Save the new document could not be completed. Please review you changes and try again.",SaveNewDocumentRevisionAttachmentError:"New revisions cannot be created without an attachment. Add an attachment and please try again."},modals:{DocumentDeleteContainerComponentHeader:"Delete Container Component Confirmation",DocumentDeleteContainerComponentMessage:"Are you sure you want to delete this container component?",DocumentDiscardChangesHeader:"Discard Document Changes",DocumentDiscardChangesMessage:"You are going to discard your document changes. Are you sure you would like to continue?",DocumentNewDocumentDiscardChangesHeader:"Discard New Document Changes",DocumentNewDocumentDiscardChangesMessage:"You are going to discard your document changes. Are you sure you would like to continue?",DocumentRevisionDeleteAttachmentHeader:"Delete Attachment Confirmation",DocumentRevisionDeleteAttachmentMessage:"Are you sure you want to delete this file?",DocumentRevisionDiscardChangesHeader:"Discard Revision Changes",DocumentRevisionDiscardChangesMessage:"You are going to discard your revision changes. Are you sure you would like to continue?"},success:{DocumentRevisionAttachmentsSaved:"Attachments Saved",DocumentRevisionMultipleNameNumbersSaved:"Items Saved Successful",DocumentRevisionSaved:"Revision Saved",DocumentSaved:"Document Saved"},warnings:{DocumentRevisionAttachments:"Reminder: No attachment has been provided for this document."}},st={Enter:13,V:86},li=function(){var i=n(t.containers.DocumentSearch);return lt(i)},ai=function(){this.element.on("click",t.buttons.DocumentSearchAddNew,si);this.element.on("click",t.buttons.DocumentSearchClear,hi);this.element.on("click",t.buttons.DocumentSearchSearch,ci);this.element.on("keyup",t.textboxes.DocumentSearchDocumentId,p);this.element.on("keyup",t.textboxes.DocumentSearchPartNumber,p);this.element.on("keyup",t.textboxes.DocumentSearchRevisionTitle,p);this.element.on("keyup",t.textboxes.DocumentSearchSupplierId,a);this.element.on("keyup",t.textboxes.DocumentSearchUPC,p);n(t.grids.DocumentSearch).show(500)},vi=function(){n(t.grids.DocumentSearch).show(500)},yi=function(n){vt(n)},ki=function(){var i=n(t.containers.DocumentSearchPopUp);return lt(i)},di=function(){var i=n(t.containers.DocumentSearchPopUp);if(i.length!=0){i.on("click",t.buttons.DocumentSearchAddNew,pi);i.on("click",t.buttons.DocumentSearchClear,wi);i.on("click",t.buttons.DocumentSearchSearch,bi);i.on("keyup",t.textboxes.DocumentSearchDocumentId,w);i.on("keyup",t.textboxes.DocumentSearchPartNumber,w);i.on("keyup",t.textboxes.DocumentSearchRevisionTitle,w);i.on("keyup",t.textboxes.DocumentSearchSupplierId,a);i.on("keyup",t.textboxes.DocumentSearchUPC,w)}},or=function(){n(t.buttons.DocumentNewDocumentSave).on("click",v);n(t.containers.NewDocument).on("change","input",rr);n(t.containers.NewDocument).on("click",t.buttons.DocumentRevisionDetailsAddAttachment,tr);n(t.containers.NewDocument).on("click",t.buttons.DocumentRevisionDetailsDeleteAttachment,ii);var i=n(t.containers.NewDocument).parents(t.containers.NewDocumentPopUp);if(i.length>0){n(t.containers.NewDocument).show(500);n(t.buttons.DocumentNewDocumentCancel).on("click",ur)}else n(t.buttons.DocumentNewDocumentCancel).on("click",ir)},sr=function(){var i=location.search.substring(1).split("&")[1].split("=")[1],r=location.search.substring(1).split("&")[2].split("=")[1],e;n(this).ajaxCall(f("../../"+u.controllers.Company,u.actions.GetSupplierName),{supplierId:r}).success(function(t){t.message=="Error"||t.success==!1?(n("[id*=txtSupplierId_"+i+"]").val(r),n("[id*=txtManufacturerId_"+i+"]").val(r)):(n("[id*=txtSupplierId_"+i+"]").val(r+", "+t),n("[id*=txtManufacturerId_"+i+"]").val(r+", "+t))}).error(function(){n("[id*=txtSupplierId_"+i+"]").val(r);n("[id*=txtManufacturerId_"+i+"]").val(r)});n("[id*=btnDocumentRevisionSave_"+i+"]").removeClass("disabled-link");n("[id*=btnDocumentRevisionSave_"+i+"]").on("click",hu);n("[id*=btnDocumentRevisionCancel_"+i+"]").on("click",gr);n("[id*=btnSetUnknownMfg_"+i+"]").hide();n("[id*=revisionMfgIdBtn_"+i+"]").hide();n("[id*=revisionSupplierIdBtn_"+i+"]").hide();n("[id*=viewRevisionManufacturerIdBtn_"+i+"]").on("conlick",k);n("[id*=viewRevisionSupplierIdBtn_"+i+"]").on("click",k);n("[id*=txtSupplierId_"+i+"]").val(r);n("[id*=txtManufacturerId_"+i+"]").val(r);n("[id*=RevisionDate_"+i+"]").val(gt());n("[id*=VerifyDate_"+i+"]").val(gt());e=n(t.containers.NewRevision).parents(t.containers.NewRevisionPopUp);e.length>0&&n(t.containers.NewRevision).show(500)},yr=function(){var i=n(t.containers.DocumentMain);if(i.length!=0){i.on("change",t.containers.DocumentDetailsForm+" input",ar);i.on("click",t.buttons.DocumentDetailsSave,v);i.on("click",t.buttons.DocumentDetailsCancel,lr);i.on("change",t.containers.DocumentRevisionDetailsForm+" input",ou);i.on("click",t.buttons.DocumentRevisionAddMultipleNameNumbers,tu);i.on("click",t.buttons.DocumentRevisionAddNewRevision,nu);i.on("click",t.buttons.DocumentRevisionDetailsSave,v);i.on("click",t.buttons.DocumentRevisionDetailsManufacturerSearch,ri);i.on("click",t.buttons.DocumentRevisionDetailsManufacturerView,k);i.on("click",t.buttons.DocumentRevisionDetailsSetUnknownManufacturer,cu);i.on("click",t.buttons.DocumentRevisionDetailsSupplierSearch,ri);i.on("click",t.buttons.DocumentRevisionDetailsSupplierView,k);i.on("click",t.containers.DocumentNewRevisionDetails+" "+t.buttons.DocumentRevisionDetailsAddAttachment,kr);i.on("click",t.containers.DocumentNewRevisionDetails+" "+t.buttons.DocumentRevisionDetailsCancel,dr);i.on("click",t.containers.DocumentNewRevisionDetails+" "+t.buttons.DocumentRevisionDetailsDeleteAttachment,ii);i.on("click",t.containers.DocumentRevisionDetails+" "+t.buttons.DocumentRevisionDetailsAddAttachment,fu);i.on("click",t.containers.DocumentRevisionDetails+" "+t.buttons.DocumentRevisionDetailsCancel,eu);i.on("click",t.containers.DocumentRevisionDetails+" "+t.buttons.DocumentRevisionDetailsDeleteAttachment,iu);i.on("keyup",t.textboxes.DocumentRevisionDetailsManufacturerId,a);i.on("keyup",t.textboxes.DocumentRevisionDetailsSupplierId,a);i.on("click",t.buttons.DocumentAddContainerComponents,tf);i.on("click",t.buttons.DocumentDeleteContainerComponent,rf);if(i=n(t.containers.DocumentRevisionMultipleNameNumbers),i.length>0){i.on("click",t.buttons.DocumentRevisionMultipleNameNumbersSave,ru);i.on("keyup",t.textboxes.DocumentRevisionMultipleNameNumbers,uu)}}},au=function(t){if(t.model.RevisionId==0){var e={DocumentId:t.model.DocumentId,DocumentInfoDescription:t.model.DocumentInfoDescription,DocumentInfoId:t.model.DocumentInfoId,FileName:t.model.FileName,PhysicalPath:t.model.PhysicalPath,RevisionId:t.model.RevisionId};n(this).ajaxCall(f(u.controllers.Document,u.actions.UpdateDocumentInfoDescription),e).success(function(n){var t=o(n);t&&r(t)}).error(function(){r(i.errors.DocumentRevisionAttachmentDescriptionUpdate)})}},vu=function(u){var f,o;if(this.value()!=null&&!(this.value().length<=0)){var s=kendo.toString(this.value(),"d"),h=new Date,e=new Date(s);if(e>h){r(i.errors.ConfirmationDateFuture);n(u.sender.element).val("");return}if(f=n(u.sender.element).parents("form"),f.length>0&&(o=new Date(f.find(t.datepickers.DocumentRevisionDetailsRevisionDate).val()),e<o)){r(i.errors.ConfirmationDateGreaterThanRevisionDate);n(u.sender.element).val("");return}}},yu=function(t){var i=n(t.container).parent().find(".k-grid-update"),r=n(t.container).parent().find(".k-grid-cancel");n(i).attr("title","Save");n(r).attr("title","Cancel")},pu=function(n){var t=n.sender.tbody.find("tr.k-grid-edit-row.k-state-selected");t.closest("tr").removeClass("k-state-selected").addClass("k-active")},wu=function(u){var f=kendo.toString(this.value(),"d"),s,h,c,o,e;if(f!=null){if(s=new Date,h=new Date(f),h>s){r(i.errors.RevisionDateFuture);n(u.sender.element).val("");return}c=kendo.toString(kendo.date.today(),"d");c==f&&(o=n(u.sender.element).parents("form"),o.length>0&&(e=o.find(t.datepickers.DocumentRevisionDetailsVerifyDate).data("kendoDatePicker"),e&&(e.value(f),e.element.trigger("change"))))}},du=function(){var t=e(this.element.attr("id")),n=this.dataItem(this.select()),i=n?n.Notes:"";ui(t,i)},gu=function(){var n=e(this.element.attr("id"));ui(n,"")},nf=function(i){var u=n(i.container).parent().find(".k-grid-cancel"),e=n(i.container).parent().find(".k-window-title"),f=n(i.container).parent().find(".k-grid-update"),r;n(e).html(i.model.DocumentNoteId>0?"Edit":"Create");n(f).attr(i.model.DocumentNoteId>0?"Update":"Create");n(u).attr("Cancel");r=n.parseHTML(n(f).html());n(f).html(r.length==0?"":r[0].outerHTML);r=n.parseHTML(n(u).html());n(u).html(r.length==0?"":r[0].outerHTML);f.on("click",bu);u.on("click",{documentId:i.model.DocumentId},ku);n(i.container).find(t.textboxes.DocumentNotes).kendoEditor({encoded:!1}).end().width(645).height(500).data("kendoWindow").center().element.find(".k-edit-form-container").width(620).height(475)},uf=function(){d(this.element.attr("id"))},ff=function(){d(this.element.attr("id"))},ef=function(i){if(i.type=="read"){var r=fi(this.transport.options.read.url),u=n(t.containers.DocumentDetailsFormExact+r).find(t.dropdownlists.DocumentDetailsContainerType).val();this.transport.options.read.data={containerTypeId:u}}},of=function(){},sf=function(i){if(i.type=="read"){var r=fi(this.transport.options.read.url),u=n(t.dropdownlists.DocumentContainerClassificationType+r).val();this.transport.options.read.data={classificationType:u}}},hf=function(){var t=e(this.element.attr("id")),n=this.dataItem(this.select()),i=n?n.Notes:"";ot(t,i)},cf=function(){var n=e(this.element.attr("id"));ot(n,"")};return{getDocumentSearchCriteria:li,getDocumentSearchPopUpCriteria:ki,initializeDocumentComponents:yr,initializeDocumentSearchPopup:di,onDocumentContainerClassificationTypeChange:uf,onDocumentContainerClassificationTypeDataBound:ff,onDocumentContainerClassificationTypeRequestStart:ef,onDocumentContainerComponentDataBound:of,onDocumentContainerComponentsRequestStart:sf,onDocumentMainPanelActivate:ai,onDocumentMainPanelActivateReadOnly:vi,onDocumentNoteChange:du,onDocumentNoteDataBound:gu,onDocumentNoteEdit:nf,onDocumentRevisionAttachmentSave:au,onDocumentRevisionConfirmationDateChange:vu,onDocumentRevisionRevisionDateChange:wu,onDocumentRevisionNameNumberGridEdit:yu,onDocumentRevisionNameNumberGridSave:pu,onDocumentStatusHistoryChange:hf,onDocumentStatusHistoryDataBound:cf,onNewDocumentPanelActivate:or,onNewRevisionPanelActivate:sr,onDisplayNewDocumentPopUp:yi}};n(function(){})})(jQuery);
//# sourceMappingURL=document-main-alt.min.js.map
